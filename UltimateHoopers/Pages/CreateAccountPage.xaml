<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="UltimateHoopers.Pages.CreateAccountPage"
             Shell.NavBarIsVisible="False"
             Shell.FlyoutBehavior="Disabled"
             BackgroundColor="{StaticResource PageBackgroundColor}">

    <Grid RowDefinitions="Auto,*,Auto"
          Padding="20">

        <!-- Logo and Header -->
        <VerticalStackLayout Grid.Row="0" 
                             Spacing="10" 
                             Margin="0,40,0,0">
            <Image Source="uh_logo.svg"
                   HeightRequest="120"
                   WidthRequest="120"
                   HorizontalOptions="Center" />

            <Label Text="Ultimate Hoopers"
                   FontSize="32"
                   HorizontalOptions="Center"
                   FontAttributes="Bold"
                   TextColor="{StaticResource PrimaryColor}"
                   Margin="0,10,0,0" />

            <Label Text="Create your account"
                   FontSize="18"
                   HorizontalOptions="Center"
                   TextColor="{StaticResource SecondaryTextColor}"
                   Margin="0,0,0,20" />
        </VerticalStackLayout>

        <!-- Registration Form -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="20"
                                 VerticalOptions="Center">

                <!-- Account Type Selection -->
                <Label Text="Account Type"
                       FontSize="18"
                       FontAttributes="Bold"
                       TextColor="{StaticResource PrimaryTextColor}"
                       Margin="0,0,0,5" />

                <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                    <!-- Free Account Option -->
                    <Frame Grid.Column="0"
                           BorderColor="{StaticResource BorderColor}"
                           CornerRadius="10"
                           HasShadow="True"
                           Padding="15"
                           BackgroundColor="{StaticResource CardBackgroundColor}"
                           x:Name="FreeAccountFrame">

                        <VerticalStackLayout Spacing="10">
                            <Grid>
                                <StackLayout Orientation="Vertical" HorizontalOptions="Start">
                                    <Label Text="Free Account"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource PrimaryTextColor}"
                                           VerticalOptions="Center" />
                                    <Label Text="$0/month"
                                           FontSize="14"
                                           TextColor="Green"
                                           FontAttributes="Bold"
                                           VerticalOptions="Center" />
                                </StackLayout>

                                <RadioButton x:Name="FreeAccountRadio"
                                             HorizontalOptions="End"
                                             IsChecked="True"
                                             CheckedChanged="OnAccountTypeChanged" />
                            </Grid>

                            <Label Text="• Find pickup games"
                                   FontSize="14"
                                   TextColor="{StaticResource SecondaryTextColor}" />
                            <Label Text="• Connect with players"
                                   FontSize="14"
                                   TextColor="{StaticResource SecondaryTextColor}" />
                            <Label Text="• Track your stats"
                                   FontSize="14"
                                   TextColor="{StaticResource SecondaryTextColor}" />
                        </VerticalStackLayout>

                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnFreeAccountSelected" />
                        </Frame.GestureRecognizers>
                    </Frame>

                    <!-- Host Account Option -->
                    <Frame Grid.Column="1"
                           BorderColor="{StaticResource BorderColor}"
                           CornerRadius="10"
                           HasShadow="True"
                           Padding="15"
                           BackgroundColor="{StaticResource CardBackgroundColor}"
                           x:Name="HostAccountFrame">

                        <VerticalStackLayout Spacing="10">
                            <Grid>
                                <StackLayout Orientation="Vertical" HorizontalOptions="Start">
                                    <Label Text="Host Account"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource PrimaryTextColor}"
                                           VerticalOptions="Center" />
                                    <Label Text="$9.99/month"
                                           FontSize="14"
                                           TextColor="{StaticResource PrimaryColor}"
                                           FontAttributes="Bold"
                                           VerticalOptions="Center" />
                                </StackLayout>

                                <RadioButton x:Name="HostAccountRadio"
                                             HorizontalOptions="End"
                                             IsChecked="False"
                                             CheckedChanged="OnAccountTypeChanged" />
                            </Grid>

                            <Label Text="• All free features"
                                   FontSize="14"
                                   TextColor="{StaticResource SecondaryTextColor}" />
                            <Label Text="• Create runs"
                                   FontSize="14"
                                   TextColor="{StaticResource SecondaryTextColor}" />
                            <Label Text="• Manage players"
                                   FontSize="14"
                                   TextColor="{StaticResource SecondaryTextColor}" />
                        </VerticalStackLayout>

                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnHostAccountSelected" />
                        </Frame.GestureRecognizers>
                    </Frame>
                </Grid>

                <Frame BorderColor="Transparent"
                       BackgroundColor="{StaticResource CardBackgroundColor}"
                       CornerRadius="10"
                       Padding="0"
                       HasShadow="True"
                       Margin="0,15,0,0">

                    <VerticalStackLayout Spacing="0">
                        <!-- Email Entry -->
                        <Border Stroke="{StaticResource BorderColor}"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 10,10,0,0">
                            <Grid ColumnDefinitions="Auto,*" Padding="15,10">
                                <Label Text="✉️"
                                       FontSize="20"
                                       VerticalOptions="Center"
                                       Grid.Column="0" 
                                       Margin="0,0,10,0" />

                                <Entry x:Name="EmailEntry"
                                       Placeholder="Email"
                                       Keyboard="Email"
                                       Grid.Column="1"
                                       VerticalOptions="Center"
                                       TextColor="Black"
                                       BackgroundColor="Transparent" />
                            </Grid>
                        </Border>

                        <!-- Username Entry -->
                        <Border Stroke="{StaticResource BorderColor}"
                                StrokeThickness="1">
                            <Grid ColumnDefinitions="Auto,*" Padding="15,10">
                                <Label Text="👤"
                                       FontSize="20"
                                       VerticalOptions="Center"
                                       Grid.Column="0" 
                                       Margin="0,0,10,0" />

                                <Entry x:Name="UsernameEntry"
                                       Placeholder="Username"
                                       Grid.Column="1"
                                       VerticalOptions="Center"
                                       TextColor="Black"
                                       BackgroundColor="Transparent" />
                            </Grid>
                        </Border>

                        <!-- Full Name Entry -->
                        <Border Stroke="{StaticResource BorderColor}"
                                StrokeThickness="1">
                            <Grid ColumnDefinitions="Auto,*" Padding="15,10">
                                <Label Text="📝"
                                       FontSize="20"
                                       VerticalOptions="Center"
                                       Grid.Column="0" 
                                       Margin="0,0,10,0" />

                                <Entry x:Name="FullNameEntry"
                                       Placeholder="Full Name"
                                       Grid.Column="1"
                                       VerticalOptions="Center"
                                       TextColor="Black"
                                       BackgroundColor="Transparent" />
                            </Grid>
                        </Border>

                        <!-- Password Entry -->
                        <Border Stroke="{StaticResource BorderColor}"
                                StrokeThickness="1">
                            <Grid ColumnDefinitions="Auto,*" Padding="15,10">
                                <Label Text="🔒"
                                       FontSize="20"
                                       VerticalOptions="Center"
                                       Grid.Column="0"
                                       Margin="0,0,10,0" />

                                <Entry x:Name="PasswordEntry"
                                       Placeholder="Password"
                                       IsPassword="True"
                                       Grid.Column="1"
                                       TextColor="Black"
                                       VerticalOptions="Center"
                                       BackgroundColor="Transparent" />
                            </Grid>
                        </Border>

                        <!-- Confirm Password Entry -->
                        <Border Stroke="{StaticResource BorderColor}"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 0,0,10,10">
                            <Grid ColumnDefinitions="Auto,*" Padding="15,10">
                                <Label Text="🔒"
                                       FontSize="20"
                                       VerticalOptions="Center"
                                       Grid.Column="0"
                                       Margin="0,0,10,0" />

                                <Entry x:Name="ConfirmPasswordEntry"
                                       Placeholder="Confirm Password"
                                       IsPassword="True"
                                       Grid.Column="1"
                                       TextColor="Black"
                                       VerticalOptions="Center"
                                       BackgroundColor="Transparent" />
                            </Grid>
                        </Border>
                    </VerticalStackLayout>
                </Frame>


                <!-- Terms and Privacy -->
                <StackLayout Orientation="Horizontal" Spacing="10">
                    <CheckBox x:Name="TermsCheckBox" 
                              Color="{StaticResource PrimaryColor}" 
                              VerticalOptions="Center" />
                    <Label TextColor="{StaticResource PrimaryTextColor}" 
                           VerticalOptions="Center">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="I agree to the " />
                                <Span Text="Terms of Service" 
                                      TextColor="{StaticResource PrimaryColor}" 
                                      TextDecorations="Underline" />
                                <Span Text=" and " />
                                <Span Text="Privacy Policy" 
                                      TextColor="{StaticResource PrimaryColor}" 
                                      TextDecorations="Underline" />
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                </StackLayout>

                <Button x:Name="RegisterButton"
                        Text="Create Account"
                        FontAttributes="Bold"
                        BackgroundColor="{StaticResource PrimaryColor}"
                        TextColor="White"
                        CornerRadius="25"
                        HeightRequest="50"
                        Clicked="OnRegisterClicked" />
            </VerticalStackLayout>
        </ScrollView>

        <!-- Footer -->
        <VerticalStackLayout Grid.Row="2" 
                             Spacing="10" 
                             Margin="0,20,0,0">
            <Label HorizontalOptions="Center">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="Already have an account? " 
                              TextColor="{StaticResource SecondaryTextColor}" />
                        <Span Text="Sign In" 
                              TextColor="{StaticResource PrimaryColor}" 
                              FontAttributes="Bold" />
                    </FormattedString>
                </Label.FormattedText>
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnBackClicked" />
                </Label.GestureRecognizers>
            </Label>
        </VerticalStackLayout>
    </Grid>
</ContentPage>