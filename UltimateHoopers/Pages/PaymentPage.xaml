<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="UltimateHoopers.Pages.PaymentPage"
             Shell.NavBarIsVisible="False"
             Shell.FlyoutBehavior="Disabled"
             BackgroundColor="{StaticResource PageBackgroundColor}">

    <Grid RowDefinitions="Auto,*,Auto"
          Padding="20">

        <!-- Logo and Header -->
        <VerticalStackLayout Grid.Row="0" 
                             Spacing="10" 
                             Margin="0,40,0,0">
            <Image Source="logo_uh.png"
                   HeightRequest="120"
                   WidthRequest="120"
                   HorizontalOptions="Center" />

            <Label Text="Ultimate Hoopers"
                   FontSize="32"
                   HorizontalOptions="Center"
                   FontAttributes="Bold"
                   TextColor="{StaticResource PrimaryColor}"
                   Margin="0,10,0,0" />

            <Label x:Name="WelcomeLabel"
                   Text="Welcome!"
                   FontSize="18"
                   HorizontalOptions="Center"
                   TextColor="{StaticResource SecondaryTextColor}"
                   Margin="0,0,0,20" />
        </VerticalStackLayout>

        <!-- Payment Form -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="20"
                                 VerticalOptions="Center">

                <!-- Host Account Details -->
                <Frame BorderColor="{StaticResource BorderColor}"
                       CornerRadius="10"
                       HasShadow="True"
                       Padding="20"
                       BackgroundColor="{StaticResource CardBackgroundColor}">

                    <VerticalStackLayout Spacing="15">
                        <Label Text="Host Account Details"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="{StaticResource PrimaryTextColor}" />

                        <Label TextColor="{StaticResource SecondaryTextColor}">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="Your Host Account subscription costs " />
                                    <Span Text="$9.99/month" 
                                          FontAttributes="Bold" 
                                          TextColor="{StaticResource PrimaryColor}" />
                                    <Span Text=" and gives you access to:" />
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>

                        <Label Text="• All standard features" TextColor="{StaticResource PrimaryTextColor}" />
                        <Label Text="• Create unlimited pickup games" TextColor="{StaticResource PrimaryTextColor}" />
                        <Label Text="• Manage players and teams" TextColor="{StaticResource PrimaryTextColor}" />
                        <Label Text="• Access to premium stats" TextColor="{StaticResource PrimaryTextColor}" />
                        <Label Text="• Priority customer support" TextColor="{StaticResource PrimaryTextColor}" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Payment Information -->
                <Frame BorderColor="{StaticResource BorderColor}"
                       BackgroundColor="{StaticResource CardBackgroundColor}"
                       CornerRadius="10"
                       Padding="0"
                       HasShadow="True">

                    <VerticalStackLayout Spacing="0">
                        <!-- Payment Header -->
                        <Label Text="Payment Information"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="{StaticResource PrimaryTextColor}"
                               Margin="20,20,20,10" />

                        <!-- Card Number Entry -->
                        <Border Stroke="{StaticResource BorderColor}"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 10,10,0,0">
                            <Grid ColumnDefinitions="Auto,*" Padding="15,10">
                                <Label Text="💳"
                                       FontSize="20"
                                       VerticalOptions="Center"
                                       Grid.Column="0" 
                                       Margin="0,0,10,0" />

                                <Entry x:Name="CardNumberEntry"
                                       Placeholder="Card Number"
                                       Keyboard="Numeric"
                                       MaxLength="19"
                                       Grid.Column="1"
                                       VerticalOptions="Center"
                                       TextColor="Black"
                                       BackgroundColor="Transparent" />
                            </Grid>
                        </Border>

                        <!-- Expiry Date Entry -->
                        <Border Stroke="{StaticResource BorderColor}"
                                StrokeThickness="1">
                            <Grid ColumnDefinitions="Auto,*" Padding="15,10">
                                <Label Text="📅"
                                       FontSize="20"
                                       VerticalOptions="Center"
                                       Grid.Column="0"
                                       Margin="0,0,10,0" />

                                <Entry x:Name="ExpiryDateEntry"
                                       Placeholder="MM/YY"
                                       Keyboard="Numeric"
                                       MaxLength="5"
                                       Grid.Column="1"
                                       TextColor="Black"
                                       VerticalOptions="Center"
                                       BackgroundColor="Transparent" />
                            </Grid>
                        </Border>

                        <!-- CVV Entry -->
                        <Border Stroke="{StaticResource BorderColor}"
                                StrokeThickness="1">
                            <Grid ColumnDefinitions="Auto,*" Padding="15,10">
                                <Label Text="🔒"
                                       FontSize="20"
                                       VerticalOptions="Center"
                                       Grid.Column="0"
                                       Margin="0,0,10,0" />

                                <Entry x:Name="CvvEntry"
                                       Placeholder="CVV"
                                       Keyboard="Numeric"
                                       MaxLength="4"
                                       Grid.Column="1"
                                       TextColor="Black"
                                       VerticalOptions="Center"
                                       BackgroundColor="Transparent" 
                                       IsPassword="True" />
                            </Grid>
                        </Border>

                        <!-- Cardholder Name Entry -->
                        <Border Stroke="{StaticResource BorderColor}"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 0,0,10,10">
                            <Grid ColumnDefinitions="Auto,*" Padding="15,10">
                                <Label Text="👤"
                                       FontSize="20"
                                       VerticalOptions="Center"
                                       Grid.Column="0"
                                       Margin="0,0,10,0" />

                                <Entry x:Name="CardholderNameEntry"
                                       Placeholder="Cardholder Name"
                                       Grid.Column="1"
                                       TextColor="Black"
                                       VerticalOptions="Center"
                                       BackgroundColor="Transparent" />
                            </Grid>
                        </Border>
                    </VerticalStackLayout>
                </Frame>

                <!-- Billing Information Notice -->
                <Label TextColor="{StaticResource SecondaryTextColor}"
                       FontSize="14"
                       HorizontalOptions="Center">
                    <Label.FormattedText>
                        <FormattedString>
                            <Span Text="Your subscription will automatically renew each month." />
                        </FormattedString>
                    </Label.FormattedText>
                </Label>

                <!-- Payment Button -->
                <Button x:Name="PaymentButton"
                        Text="Complete Payment"
                        FontAttributes="Bold"
                        BackgroundColor="{StaticResource PrimaryColor}"
                        TextColor="White"
                        CornerRadius="25"
                        HeightRequest="50"
                        Clicked="OnPaymentSubmitClicked" />
            </VerticalStackLayout>
        </ScrollView>

        <!-- Footer -->
        <VerticalStackLayout Grid.Row="2" 
                             Spacing="10" 
                             Margin="0,20,0,0">
            <Label HorizontalOptions="Center">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="Changed your mind? " 
                              TextColor="{StaticResource SecondaryTextColor}" />
                        <Span Text="Go back" 
                              TextColor="{StaticResource PrimaryColor}" 
                              FontAttributes="Bold" />
                    </FormattedString>
                </Label.FormattedText>
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnBackClicked" />
                </Label.GestureRecognizers>
            </Label>
        </VerticalStackLayout>
    </Grid>
</ContentPage>