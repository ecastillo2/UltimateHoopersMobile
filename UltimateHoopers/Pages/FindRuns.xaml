<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="UltimateHoopers.Pages.FindRunsPage"
             Title="Find Runs"
             BackgroundColor="{StaticResource PageBackgroundColor}">

    <Grid RowDefinitions="Auto,*,Auto"
          Padding="20">

        <!-- Header with Title -->
        <Grid Grid.Row="0" 
              ColumnDefinitions="*,Auto"
              Margin="0,10,0,20">

            <VerticalStackLayout Grid.Column="0">
                <Label Text="Find Runs"
                       FontSize="28"
                       FontAttributes="Bold"
                       TextColor="{StaticResource PrimaryColor}" />

                <Label Text="Join games in your area"
                       FontSize="16"
                       TextColor="{StaticResource SecondaryTextColor}" />
            </VerticalStackLayout>

            <!-- Back Button -->
            <Frame Grid.Column="1"
                   CornerRadius="25"
                   HeightRequest="50"
                   WidthRequest="50"
                   Padding="0"
                   BorderColor="{StaticResource BorderColor}"
                   BackgroundColor="{StaticResource CardBackgroundColor}"
                   HasShadow="True">

                <Label Text="←"
                       FontSize="24"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       TextColor="{StaticResource PrimaryTextColor}" />

                <Frame.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnBackClicked" />
                </Frame.GestureRecognizers>
            </Frame>
        </Grid>

        <!-- Content Area -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="20">

                <!-- Search Section -->
                <Frame BorderColor="{StaticResource BorderColor}"
                       CornerRadius="10"
                       HasShadow="True"
                       Padding="15"
                       BackgroundColor="{StaticResource CardBackgroundColor}">

                    <VerticalStackLayout Spacing="15">
                        <Label Text="Search Pickup Games"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="{StaticResource PrimaryTextColor}" />

                        <!-- Search Input -->
                        <Frame Padding="15,0" 
                               CornerRadius="25" 
                               HasShadow="False"
                               BorderColor="White"
                               HeightRequest="50">
                            <Grid ColumnDefinitions="Auto,*">
                                <Label Text="🔍" 
                                       FontSize="20" 
                                       VerticalOptions="Center"
                                       TextColor="{StaticResource SecondaryTextColor}" />
                                <Entry Grid.Column="1" 
                                       Placeholder="Search by location..." 
                                       PlaceholderColor="{StaticResource SecondaryTextColor}"
                                       TextColor="{StaticResource PrimaryTextColor}"
                                       BackgroundColor="LightGrey"
                                       Margin="5,0,0,0"
                                       VerticalOptions="Center"
                                       x:Name="SearchEntry"
                                       TextChanged="OnSearchTextChanged" />
                            </Grid>
                        </Frame>

                        <!-- Filters -->
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                            <Frame Grid.Column="0"
                                   Padding="10" 
                                   CornerRadius="10" 
                                   HasShadow="False"
                                   BackgroundColor="White"
                                   BorderColor="{StaticResource BorderColor}">
                                <Grid ColumnDefinitions="Auto,*">
                                    <Label Text="📅" 
                                           FontSize="18" 
                                           VerticalOptions="Center"
                                           BackgroundColor="White"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Picker Grid.Column="1" 
                                            Title="Select Date" 
                                            TitleColor="Black"
                                            Margin="5,0,0,0"
                                            TextColor="{StaticResource PrimaryTextColor}"
                                            BackgroundColor="LightGrey"
                                            x:Name="DatePicker"
                                            SelectedIndexChanged="OnDateSelected">
                                        <Picker.Items>
                                            <x:String>Today</x:String>
                                            <x:String>Tomorrow</x:String>
                                            <x:String>This Weekend</x:String>
                                            <x:String>Next Week</x:String>
                                        </Picker.Items>
                                    </Picker>
                                </Grid>
                            </Frame>

                            <Frame Grid.Column="1"
                                   Padding="10" 
                                   CornerRadius="10" 
                                   HasShadow="False"
                                   BackgroundColor="White"
                                   BorderColor="{StaticResource BorderColor}">
                                <Grid ColumnDefinitions="Auto,*">
                                    <Label Text="👥" 
                                           FontSize="18" 
                                           VerticalOptions="Center"
                                           BackgroundColor="White"
                                           TextColor="Black" />
                                    <Picker Grid.Column="1" 
                                            Title="Skill Level" 
                                            TitleColor="Black"
                                            TextColor="{StaticResource PrimaryTextColor}"
                                            Margin="5,0,0,0"
                                           
                                            x:Name="SkillLevelPicker"
                                            BackgroundColor="LightGrey"
                                         
                                            SelectedIndexChanged="OnSkillLevelSelected">
                                        <Picker.Items>
                                            <x:String>All Levels</x:String>
                                            <x:String>Beginner</x:String>
                                            <x:String>Intermediate</x:String>
                                            <x:String>Advanced</x:String>
                                        </Picker.Items>
                                    </Picker>
                                </Grid>
                            </Frame>
                        </Grid>

                        <!-- Map Toggle and Create Run Button -->
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                            <Button Grid.Column="0" 
                                    Text="Show Map View"
                                    BackgroundColor="Transparent"
                                    TextColor="{StaticResource PrimaryColor}"
                                    BorderColor="{StaticResource PrimaryColor}"
                                    BorderWidth="1"
                                    CornerRadius="20"
                                    WidthRequest="150"
                                    Clicked="OnToggleMapViewClicked" />

                            <Button Grid.Column="1" 
                                    Text="Create Run"
                                    BackgroundColor="{StaticResource PrimaryColor}"
                                    TextColor="White"
                                    CornerRadius="20"
                                    WidthRequest="150"
                                    Clicked="OnCreateRunClicked" />
                        </Grid>
                    </VerticalStackLayout>
                </Frame>

                <!-- Nearby Runs Section -->
                <Label Text="Upcoming Runs Near You"
                       FontSize="20"
                       FontAttributes="Bold"
                       TextColor="{StaticResource PrimaryTextColor}"
                       Margin="0,10,0,5" />

                <!-- Run Item 1 -->
                <Frame BorderColor="{StaticResource BorderColor}"
                       CornerRadius="10"
                       HasShadow="True"
                       Padding="0"
                       BackgroundColor="{StaticResource CardBackgroundColor}">

                    <Grid RowDefinitions="Auto,Auto" 
                          ColumnDefinitions="Auto,*,Auto"
                          Padding="15">

                        <!-- Court Icon -->
                        <Frame Grid.RowSpan="2"
                               Grid.Column="0"
                               CornerRadius="40"
                               HeightRequest="80"
                               WidthRequest="80"
                               Padding="0"
                               BorderColor="{StaticResource BorderColor}"
                               HasShadow="False"
                               IsClippedToBounds="True">
                            <Image Source="https://placehold.co/80x80"
                                   Aspect="AspectFill"
                                   HorizontalOptions="FillAndExpand"
                                   VerticalOptions="FillAndExpand" />
                        </Frame>

                        <!-- Court Info -->
                        <VerticalStackLayout Grid.Row="0"
                                             Grid.Column="1"
                                             Margin="15,0,0,0">
                            <Label Text="Downtown Court"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource PrimaryTextColor}" />
                            <Label Text="123 Main St, Atlanta, GA"
                                   FontSize="14"
                                   TextColor="{StaticResource SecondaryTextColor}" />
                            <HorizontalStackLayout Spacing="15" Margin="0,5,0,0">
                                <HorizontalStackLayout>
                                    <Label Text="📅" 
                                           FontSize="14" 
                                           VerticalOptions="Center"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Label Text="May 16, 2025" 
                                           FontSize="14" 
                                           Margin="5,0,0,0"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                </HorizontalStackLayout>
                                <HorizontalStackLayout>
                                    <Label Text="⏰" 
                                           FontSize="14" 
                                           VerticalOptions="Center"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Label Text="7:00 PM" 
                                           FontSize="14" 
                                           Margin="5,0,0,0"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                </HorizontalStackLayout>
                            </HorizontalStackLayout>
                            <HorizontalStackLayout Spacing="15" Margin="0,5,0,0">
                                <HorizontalStackLayout>
                                    <Label Text="👥" 
                                           FontSize="14" 
                                           VerticalOptions="Center"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Label Text="8/10 players" 
                                           FontSize="14" 
                                           Margin="5,0,0,0"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                </HorizontalStackLayout>
                                <HorizontalStackLayout>
                                    <Label Text="🏀" 
                                           FontSize="14" 
                                           VerticalOptions="Center"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Label Text="Intermediate" 
                                           FontSize="14" 
                                           Margin="5,0,0,0"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                </HorizontalStackLayout>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>

                        <!-- Join Button -->
                        <Button Grid.Row="0"
                                Grid.Column="2"
                                Text="Join"
                                BackgroundColor="{StaticResource PrimaryColor}"
                                TextColor="White"
                                CornerRadius="20"
                                HeightRequest="40"
                                WidthRequest="80"
                                VerticalOptions="Start"
                                HorizontalOptions="End"
                                Clicked="OnJoinGameClicked" />

                        <Label Grid.Row="1"
                               Grid.Column="2"
                               Text="0.8 mi"
                               TextColor="{StaticResource SecondaryTextColor}"
                               HorizontalOptions="End"
                               VerticalOptions="End" />
                    </Grid>
                </Frame>

                <!-- Run Item 2 -->
                <Frame BorderColor="{StaticResource BorderColor}"
                       CornerRadius="10"
                       HasShadow="True"
                       Padding="0"
                       BackgroundColor="{StaticResource CardBackgroundColor}">

                    <Grid RowDefinitions="Auto,Auto" 
                          ColumnDefinitions="Auto,*,Auto"
                          Padding="15">

                        <!-- Court Icon -->
                        <Frame Grid.RowSpan="2"
                               Grid.Column="0"
                               CornerRadius="40"
                               HeightRequest="80"
                               WidthRequest="80"
                               Padding="0"
                               BorderColor="{StaticResource BorderColor}"
                               HasShadow="False"
                               IsClippedToBounds="True">
                            <Image Source="https://placehold.co/80x80"
                                   Aspect="AspectFill"
                                   HorizontalOptions="FillAndExpand"
                                   VerticalOptions="FillAndExpand" />
                        </Frame>

                        <!-- Court Info -->
                        <VerticalStackLayout Grid.Row="0"
                                             Grid.Column="1"
                                             Margin="15,0,0,0">
                            <Label Text="Westside Rec Center"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource PrimaryTextColor}" />
                            <Label Text="456 Park Ave, Atlanta, GA"
                                   FontSize="14"
                                   TextColor="{StaticResource SecondaryTextColor}" />
                            <HorizontalStackLayout Spacing="15" Margin="0,5,0,0">
                                <HorizontalStackLayout>
                                    <Label Text="📅" 
                                           FontSize="14" 
                                           VerticalOptions="Center"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Label Text="May 17, 2025" 
                                           FontSize="14" 
                                           Margin="5,0,0,0"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                </HorizontalStackLayout>
                                <HorizontalStackLayout>
                                    <Label Text="⏰" 
                                           FontSize="14" 
                                           VerticalOptions="Center"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Label Text="5:30 PM" 
                                           FontSize="14" 
                                           Margin="5,0,0,0"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                </HorizontalStackLayout>
                            </HorizontalStackLayout>
                            <HorizontalStackLayout Spacing="15" Margin="0,5,0,0">
                                <HorizontalStackLayout>
                                    <Label Text="👥" 
                                           FontSize="14" 
                                           VerticalOptions="Center"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Label Text="5/10 players" 
                                           FontSize="14" 
                                           Margin="5,0,0,0"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                </HorizontalStackLayout>
                                <HorizontalStackLayout>
                                    <Label Text="🏀" 
                                           FontSize="14" 
                                           VerticalOptions="Center"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Label Text="All Levels" 
                                           FontSize="14" 
                                           Margin="5,0,0,0"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                </HorizontalStackLayout>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>

                        <!-- Join Button -->
                        <Button Grid.Row="0"
                                Grid.Column="2"
                                Text="Join"
                                BackgroundColor="{StaticResource PrimaryColor}"
                                TextColor="White"
                                CornerRadius="20"
                                HeightRequest="40"
                                WidthRequest="80"
                                VerticalOptions="Start"
                                HorizontalOptions="End"
                                Clicked="OnJoinGameClicked" />

                        <Label Grid.Row="1"
                               Grid.Column="2"
                               Text="1.2 mi"
                               TextColor="{StaticResource SecondaryTextColor}"
                               HorizontalOptions="End"
                               VerticalOptions="End" />
                    </Grid>
                </Frame>

                <!-- Run Item 3 -->
                <Frame BorderColor="{StaticResource BorderColor}"
                       CornerRadius="10"
                       HasShadow="True"
                       Padding="0"
                       BackgroundColor="{StaticResource CardBackgroundColor}">

                    <Grid RowDefinitions="Auto,Auto" 
                          ColumnDefinitions="Auto,*,Auto"
                          Padding="15">

                        <!-- Court Icon -->
                        <Frame Grid.RowSpan="2"
                               Grid.Column="0"
                               CornerRadius="40"
                               HeightRequest="80"
                               WidthRequest="80"
                               Padding="0"
                               BorderColor="{StaticResource BorderColor}"
                               HasShadow="False"
                               IsClippedToBounds="True">
                            <Image Source="https://placehold.co/80x80"
                                   Aspect="AspectFill"
                                   HorizontalOptions="FillAndExpand"
                                   VerticalOptions="FillAndExpand" />
                        </Frame>

                        <!-- Court Info -->
                        <VerticalStackLayout Grid.Row="0"
                                             Grid.Column="1"
                                             Margin="15,0,0,0">
                            <Label Text="Eastside Community Center"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource PrimaryTextColor}" />
                            <Label Text="789 East St, Atlanta, GA"
                                   FontSize="14"
                                   TextColor="{StaticResource SecondaryTextColor}" />
                            <HorizontalStackLayout Spacing="15" Margin="0,5,0,0">
                                <HorizontalStackLayout>
                                    <Label Text="📅" 
                                           FontSize="14" 
                                           VerticalOptions="Center"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Label Text="May 18, 2025" 
                                           FontSize="14" 
                                           Margin="5,0,0,0"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                </HorizontalStackLayout>
                                <HorizontalStackLayout>
                                    <Label Text="⏰" 
                                           FontSize="14" 
                                           VerticalOptions="Center"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Label Text="10:00 AM" 
                                           FontSize="14" 
                                           Margin="5,0,0,0"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                </HorizontalStackLayout>
                            </HorizontalStackLayout>
                            <HorizontalStackLayout Spacing="15" Margin="0,5,0,0">
                                <HorizontalStackLayout>
                                    <Label Text="👥" 
                                           FontSize="14" 
                                           VerticalOptions="Center"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Label Text="3/10 players" 
                                           FontSize="14" 
                                           Margin="5,0,0,0"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                </HorizontalStackLayout>
                                <HorizontalStackLayout>
                                    <Label Text="🏀" 
                                           FontSize="14" 
                                           VerticalOptions="Center"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                    <Label Text="Advanced" 
                                           FontSize="14" 
                                           Margin="5,0,0,0"
                                           TextColor="{StaticResource PrimaryTextColor}" />
                                </HorizontalStackLayout>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>

                        <!-- Join Button -->
                        <Button Grid.Row="0"
                                Grid.Column="2"
                                Text="Join"
                                BackgroundColor="{StaticResource PrimaryColor}"
                                TextColor="White"
                                CornerRadius="20"
                                HeightRequest="40"
                                WidthRequest="80"
                                VerticalOptions="Start"
                                HorizontalOptions="End"
                                Clicked="OnJoinGameClicked" />

                        <Label Grid.Row="1"
                               Grid.Column="2"
                               Text="2.5 mi"
                               TextColor="{StaticResource SecondaryTextColor}"
                               HorizontalOptions="End"
                               VerticalOptions="End" />
                    </Grid>
                </Frame>

                <!-- Load More Button -->
                <Button Text="Load More"
                        BackgroundColor="Transparent"
                        TextColor="{StaticResource PrimaryColor}"
                        BorderColor="{StaticResource PrimaryColor}"
                        BorderWidth="1"
                        CornerRadius="20"
                        Margin="0,10,0,20"
                        Clicked="OnLoadMoreClicked" />
            </VerticalStackLayout>
        </ScrollView>

        <!-- Navigation Footer -->
        <Grid Grid.Row="2"
              ColumnDefinitions="*,*,*,*"
              BackgroundColor="{StaticResource CardBackgroundColor}"
              HeightRequest="70"
              Margin="-20,0,-20,0"
              Padding="0,5,0,20">

            <VerticalStackLayout Grid.Column="0"
                                 HorizontalOptions="Center"
                                 VerticalOptions="Center"
                                 Spacing="2">
                <Label Text="🏠"
                       FontSize="20"
                       TextColor="{StaticResource SecondaryTextColor}"
                       HorizontalOptions="Center" />
                <Label Text="Home"
                       FontSize="12"
                       TextColor="{StaticResource SecondaryTextColor}"
                       HorizontalOptions="Center" />

                <VerticalStackLayout.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnHomeNavigationClicked" />
                </VerticalStackLayout.GestureRecognizers>
            </VerticalStackLayout>

            <VerticalStackLayout Grid.Column="1"
                                 HorizontalOptions="Center"
                                 VerticalOptions="Center"
                                 Spacing="2">
                <Label Text="📊"
                       FontSize="20"
                       TextColor="{StaticResource SecondaryTextColor}"
                       HorizontalOptions="Center" />
                <Label Text="Stats"
                       FontSize="12"
                       TextColor="{StaticResource SecondaryTextColor}"
                       HorizontalOptions="Center" />

                <VerticalStackLayout.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnStatsNavigationClicked" />
                </VerticalStackLayout.GestureRecognizers>
            </VerticalStackLayout>

            <VerticalStackLayout Grid.Column="2"
                                 HorizontalOptions="Center"
                                 VerticalOptions="Center"
                                 Spacing="2">
                <Label Text="🏀"
                       FontSize="20"
                       TextColor="{StaticResource PrimaryColor}"
                       HorizontalOptions="Center" />
                <Label Text="Games"
                       FontSize="12"
                       TextColor="{StaticResource PrimaryColor}"
                       FontAttributes="Bold"
                       HorizontalOptions="Center" />
            </VerticalStackLayout>

            <VerticalStackLayout Grid.Column="3"
                                 HorizontalOptions="Center"
                                 VerticalOptions="Center"
                                 Spacing="2"
                                 Opacity="0.6">
                <Label Text="👤"
                       FontSize="20"
                       TextColor="{StaticResource SecondaryTextColor}"
                       HorizontalOptions="Center" />
                <Label Text="Profile"
                       FontSize="12"
                       TextColor="{StaticResource SecondaryTextColor}"
                       HorizontalOptions="Center" />

                <VerticalStackLayout.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnProfileNavigationClicked" />
                </VerticalStackLayout.GestureRecognizers>
            </VerticalStackLayout>
        </Grid>
    </Grid>
</ContentPage>